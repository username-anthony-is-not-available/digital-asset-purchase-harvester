services:
  harvester:
    build: .
    image: digital-asset-harvester:latest
    container_name: digital-asset-harvester
    volumes:
      - ./:/app
      - ./output:/app/output
    environment:
      - DAP_LOG_LEVEL=${DAP_LOG_LEVEL:-INFO}
      - DAP_LLM_MODEL_NAME=${DAP_LLM_MODEL_NAME:-llama3.2:3b}
      - DAP_ENABLE_CLOUD_LLM=${DAP_ENABLE_CLOUD_LLM:-false}
      - OLLAMA_HOST=${OLLAMA_HOST:-http://ollama:11434}
    depends_on:
      - ollama
    networks:
      - harvester-network
    command: ["tail", "-f", "/dev/null"]  # Keep container running

  ollama:
    image: ollama/ollama:latest
    container_name: ollama-service
    ports:
      - "11434:11434"
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - harvester-network

networks:
  harvester-network:
    driver: bridge

volumes:
  ollama-data:
